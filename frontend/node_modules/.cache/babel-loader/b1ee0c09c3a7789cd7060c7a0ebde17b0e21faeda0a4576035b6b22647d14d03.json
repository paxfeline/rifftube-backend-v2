{"ast":null,"code":"var _jsxFileName = \"/Users/davidnewberry/Documents/test_rails/frontend/src/components/YouTubeVideo/AllowPlayback.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { setPlayerMode, PLAY_MODE } from '../../actions/index.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AllowPlayback extends React.Component {\n  constructor(props) {\n    super(props);\n    this.componentDidMount = () => {\n      var test = new Audio();\n      test.controls = false;\n      test.src = '/dingdong.wav';\n      test.play().then(() => {\n        this.setupAudioPlayers();\n      }).catch(() => {\n        console.error('playback not allowed');\n      });\n    };\n    this.setupAudioPlayers = () => {\n      this.setState({\n        allowed: true\n      });\n      window.audioContexts = [];\n      window.audioPlayers = [];\n      window.audioPlayerUse = [];\n      window.audioPlayersCount = 5;\n      for (let i = 0; i < 5; i++) {\n        window.audioContexts[i] = new (window.AudioContext || window.webkitAudioContext)();\n        window.audioPlayers[i] = new Audio(); // should be identical behavior to: document.createElement('audio');\n        window.audioPlayers[i].controls = false;\n        window.audioPlayers[i].addEventListener('ended', function () {\n          this.inUse = false;\n        });\n        let se = document.createElement('source');\n        window.audioPlayers[i].appendChild(se);\n        window.audioPlayers[i].srcEl = se;\n      }\n    };\n    this.render = () => {\n      //if (!this.state) return null;\n\n      return !this.state.allowed ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"audio-capture\",\n        onClick: () => {\n          this.setupAudioPlayers();\n          this.props.setPlayerMode(PLAY_MODE);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }, this) : null;\n    };\n    this.state = {\n      allowed: false\n    };\n  }\n}\nconst mapStateToProps = state => ({});\nconst mapDispatchToProps = {\n  setPlayerMode\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(AllowPlayback);","map":{"version":3,"names":["React","connect","setPlayerMode","PLAY_MODE","AllowPlayback","Component","constructor","props","componentDidMount","test","Audio","controls","src","play","then","setupAudioPlayers","catch","console","error","setState","allowed","window","audioContexts","audioPlayers","audioPlayerUse","audioPlayersCount","i","AudioContext","webkitAudioContext","addEventListener","inUse","se","document","createElement","appendChild","srcEl","render","state","mapStateToProps","mapDispatchToProps"],"sources":["/Users/davidnewberry/Documents/test_rails/frontend/src/components/YouTubeVideo/AllowPlayback.js"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { setPlayerMode, PLAY_MODE } from '../../actions/index.js';\n\nclass AllowPlayback extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { allowed: false };\n  }\n\n  componentDidMount = () => {\n    var test = new Audio();\n    test.controls = false;\n    test.src = '/dingdong.wav';\n    test\n      .play()\n      .then(() => {\n        this.setupAudioPlayers();\n      })\n      .catch(() => {\n        console.error('playback not allowed');\n      });\n  };\n\n  setupAudioPlayers = () => {\n    this.setState({ allowed: true });\n    window.audioContexts = [];\n    window.audioPlayers = [];\n    window.audioPlayerUse = [];\n    window.audioPlayersCount = 5;\n    for (let i = 0; i < 5; i++) {\n      window.audioContexts[i] = new (window.AudioContext ||\n        window.webkitAudioContext)();\n\n      window.audioPlayers[i] = new Audio(); // should be identical behavior to: document.createElement('audio');\n      window.audioPlayers[i].controls = false;\n      window.audioPlayers[i].addEventListener('ended', function () {\n        this.inUse = false;\n      });\n\n      let se = document.createElement('source');\n      window.audioPlayers[i].appendChild(se);\n      window.audioPlayers[i].srcEl = se;\n    }\n  };\n\n  render = () => {\n    //if (!this.state) return null;\n\n    return !this.state.allowed ? (\n      <div\n        className=\"audio-capture\"\n        onClick={() => {\n          this.setupAudioPlayers();\n          this.props.setPlayerMode(PLAY_MODE);\n        }}\n      />\n    ) : null;\n  };\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {\n  setPlayerMode,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllowPlayback);\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,aAAa;AACrC,SAASC,aAAa,EAAEC,SAAS,QAAQ,wBAAwB;AAAC;AAElE,MAAMC,aAAa,SAASJ,KAAK,CAACK,SAAS,CAAC;EAC1CC,WAAW,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAAC,KAIfC,iBAAiB,GAAG,MAAM;MACxB,IAAIC,IAAI,GAAG,IAAIC,KAAK,EAAE;MACtBD,IAAI,CAACE,QAAQ,GAAG,KAAK;MACrBF,IAAI,CAACG,GAAG,GAAG,eAAe;MAC1BH,IAAI,CACDI,IAAI,EAAE,CACNC,IAAI,CAAC,MAAM;QACV,IAAI,CAACC,iBAAiB,EAAE;MAC1B,CAAC,CAAC,CACDC,KAAK,CAAC,MAAM;QACXC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAC;MACvC,CAAC,CAAC;IACN,CAAC;IAAA,KAEDH,iBAAiB,GAAG,MAAM;MACxB,IAAI,CAACI,QAAQ,CAAC;QAAEC,OAAO,EAAE;MAAK,CAAC,CAAC;MAChCC,MAAM,CAACC,aAAa,GAAG,EAAE;MACzBD,MAAM,CAACE,YAAY,GAAG,EAAE;MACxBF,MAAM,CAACG,cAAc,GAAG,EAAE;MAC1BH,MAAM,CAACI,iBAAiB,GAAG,CAAC;MAC5B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QAC1BL,MAAM,CAACC,aAAa,CAACI,CAAC,CAAC,GAAG,KAAKL,MAAM,CAACM,YAAY,IAChDN,MAAM,CAACO,kBAAkB,GAAG;QAE9BP,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,GAAG,IAAIhB,KAAK,EAAE,CAAC,CAAC;QACtCW,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACf,QAAQ,GAAG,KAAK;QACvCU,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACG,gBAAgB,CAAC,OAAO,EAAE,YAAY;UAC3D,IAAI,CAACC,KAAK,GAAG,KAAK;QACpB,CAAC,CAAC;QAEF,IAAIC,EAAE,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;QACzCZ,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACQ,WAAW,CAACH,EAAE,CAAC;QACtCV,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACS,KAAK,GAAGJ,EAAE;MACnC;IACF,CAAC;IAAA,KAEDK,MAAM,GAAG,MAAM;MACb;;MAEA,OAAO,CAAC,IAAI,CAACC,KAAK,CAACjB,OAAO,gBACxB;QACE,SAAS,EAAC,eAAe;QACzB,OAAO,EAAE,MAAM;UACb,IAAI,CAACL,iBAAiB,EAAE;UACxB,IAAI,CAACR,KAAK,CAACL,aAAa,CAACC,SAAS,CAAC;QACrC;MAAE;QAAA;QAAA;QAAA;MAAA,QACF,GACA,IAAI;IACV,CAAC;IAnDC,IAAI,CAACkC,KAAK,GAAG;MAAEjB,OAAO,EAAE;IAAM,CAAC;EACjC;AAmDF;AAEA,MAAMkB,eAAe,GAAID,KAAK,KAAM,CAAC,CAAC,CAAC;AAEvC,MAAME,kBAAkB,GAAG;EACzBrC;AACF,CAAC;AAED,eAAeD,OAAO,CAACqC,eAAe,EAAEC,kBAAkB,CAAC,CAACnC,aAAa,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}