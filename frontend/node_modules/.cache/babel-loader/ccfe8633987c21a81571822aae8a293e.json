{"ast":null,"code":"import _slicedToArray from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createRef}from'react';import{connect}from'react-redux';import{editRiff,deleteRiff,updateRiffTime}from'../../actions/index.js';import Delete from\"../../images/delete-24px.svg\";import Edit from\"../../images/edit-24px.svg\";import Audio from\"../../images/settings_voice-24px.svg\";import Text from\"../../images/chat-24px.svg\";/* this component is where a user can edit their riff */function RiffDetail(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];//useEffect(() => { setTimeout(() => {setVisible(true);}, 20000); }, []);\nuseEffect(function(){setVisible(true);},[]);var divRef=createRef();useEffect(function(){if(props.scroll)divRef.current.parentNode.scrollTop=divRef.current.offsetTop;},[divRef,props.scroll]);var timeRef=createRef();return/*#__PURE__*/React.createElement(\"div\",{ref:divRef,className:\"riff-detail\".concat(props.selected?' riff-detail-selected':'').concat(visible?'':' invisible'),style:props.style},/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){window.rifftubePlayer.seekTo(Math.max(props.time-3,0),true);}},\"jump to\"),props.type==='audio'?/*#__PURE__*/React.createElement(\"div\",{className:\"audio-icon riff-type-icon\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"audio\",src:Audio})):/*#__PURE__*/React.createElement(\"div\",{className:\"text-icon riff-type-icon\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"text\",src:Text})),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"edit-time\",step:\"0.5\",defaultValue:props.time.toFixed(2),ref:timeRef,onChange:function onChange(){props.updateRiffTime(props.googleUser.getAuthResponse().id_token,timeRef.current.value,props.video_id,props.id,props.websocket);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"edit-riff-buttons\"},/*#__PURE__*/React.createElement(\"button\",{className:\"riff-button\",onClick:function onClick(){return props.editRiff(props.index,props.type==='audio'?props.id:null,// weird but ok; yields id or null/false\n!props.riffsAudio.all[props.id]);}},/*#__PURE__*/React.createElement(\"img\",{alt:\"edit button\",src:Edit})),/*#__PURE__*/React.createElement(\"button\",{className:\"riff-button\",onClick:function onClick(){if(window.confirm('Delete?'))props.deleteRiff(props.id,props.googleUser,props.video_id,props.websocket);}},/*#__PURE__*/React.createElement(\"img\",{alt:\"delete button\",src:Delete}))));}var mapStateToProps=function mapStateToProps(state){return{googleUser:state.googleUser,riffsAudio:state.riffsAudio,websocket:state.websocket};};var mapDispatchToProps={editRiff:editRiff,deleteRiff:deleteRiff,updateRiffTime:updateRiffTime};export default connect(mapStateToProps,mapDispatchToProps)(RiffDetail);","map":{"version":3,"names":["React","useState","useEffect","createRef","connect","editRiff","deleteRiff","updateRiffTime","RiffDetail","props","visible","setVisible","divRef","scroll","current","parentNode","scrollTop","offsetTop","timeRef","selected","style","window","rifftubePlayer","seekTo","Math","max","time","type","Audio","Text","toFixed","googleUser","getAuthResponse","id_token","value","video_id","id","websocket","index","riffsAudio","all","Edit","confirm","Delete","mapStateToProps","state","mapDispatchToProps"],"sources":["/Users/davidnewberry/Documents/test_rails/frontend/src/components/RiffControls/RiffDetail.js"],"sourcesContent":["import React, { useState, useEffect, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport { editRiff, deleteRiff, updateRiffTime } from '../../actions/index.js';\nimport Delete from '../../images/delete-24px.svg';\nimport Edit from '../../images/edit-24px.svg';\nimport Audio from '../../images/settings_voice-24px.svg';\nimport Text from '../../images/chat-24px.svg';\n\n/* this component is where a user can edit their riff */\nfunction RiffDetail(props) {\n  const [visible, setVisible] = useState(false);\n\n  //useEffect(() => { setTimeout(() => {setVisible(true);}, 20000); }, []);\n  useEffect(() => {\n    setVisible(true);\n  }, []);\n\n  const divRef = createRef();\n\n  useEffect(() => {\n    if (props.scroll)\n      divRef.current.parentNode.scrollTop = divRef.current.offsetTop;\n  }, [divRef, props.scroll]);\n\n  const timeRef = createRef();\n\n  return (\n    <div\n      ref={divRef}\n      className={`riff-detail${props.selected ? ' riff-detail-selected' : ''}${\n        visible ? '' : ' invisible'\n      }`}\n      style={props.style}\n    >\n      <button\n        onClick={() => {\n          window.rifftubePlayer.seekTo(Math.max(props.time - 3, 0), true);\n        }}\n      >\n        jump to\n      </button>\n      {props.type === 'audio' ? (\n        <div className=\"audio-icon riff-type-icon\">\n          <img alt=\"audio\" src={Audio} />\n        </div>\n      ) : (\n        <div className=\"text-icon riff-type-icon\">\n          <img alt=\"text\" src={Text} />\n        </div>\n      )}\n      {/* \n      <li>\n        start time: {props.time ? props.time.toFixed(2) : null}\n      </li>\n      <li>duration: {props.duration.toFixed(2)}secs</li>\n      <li>type: {props.type}</li>\n      */}\n      <input\n        type=\"number\"\n        className=\"edit-time\"\n        step=\"0.5\"\n        defaultValue={props.time.toFixed(2)}\n        ref={timeRef}\n        onChange={() => {\n          props.updateRiffTime(\n            props.googleUser.getAuthResponse().id_token,\n            timeRef.current.value,\n            props.video_id,\n            props.id,\n            props.websocket\n          );\n        }}\n      ></input>\n      <div className=\"edit-riff-buttons\">\n        <button\n          className=\"riff-button\"\n          onClick={() =>\n            props.editRiff(\n              props.index,\n              props.type === 'audio' ? props.id : null, // weird but ok; yields id or null/false\n              !props.riffsAudio.all[props.id]\n            )\n          }\n        >\n          <img alt=\"edit button\" src={Edit} />\n        </button>\n        <button\n          className=\"riff-button\"\n          onClick={() => {\n            if (window.confirm('Delete?'))\n              props.deleteRiff(\n                props.id,\n                props.googleUser,\n                props.video_id,\n                props.websocket\n              );\n          }}\n        >\n          <img alt=\"delete button\" src={Delete} />\n        </button>\n      </div>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => ({\n  googleUser: state.googleUser,\n  riffsAudio: state.riffsAudio,\n  websocket: state.websocket,\n});\n\nconst mapDispatchToProps = {\n  editRiff,\n  deleteRiff,\n  updateRiffTime,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RiffDetail);\n"],"mappings":"yKAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,SAAS,KAAQ,OAAO,CAC7D,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,QAAQ,CAAEC,UAAU,CAAEC,cAAc,KAAQ,wBAAwB,CAAC,mMAM9E,wDACA,QAASC,WAAU,CAACC,KAAK,CAAE,CACzB,cAA8BR,QAAQ,CAAC,KAAK,CAAC,wCAAtCS,OAAO,eAAEC,UAAU,eAE1B;AACAT,SAAS,CAAC,UAAM,CACdS,UAAU,CAAC,IAAI,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMC,OAAM,CAAGT,SAAS,EAAE,CAE1BD,SAAS,CAAC,UAAM,CACd,GAAIO,KAAK,CAACI,MAAM,CACdD,MAAM,CAACE,OAAO,CAACC,UAAU,CAACC,SAAS,CAAGJ,MAAM,CAACE,OAAO,CAACG,SAAS,CAClE,CAAC,CAAE,CAACL,MAAM,CAAEH,KAAK,CAACI,MAAM,CAAC,CAAC,CAE1B,GAAMK,QAAO,CAAGf,SAAS,EAAE,CAE3B,mBACE,2BACE,GAAG,CAAES,MAAO,CACZ,SAAS,sBAAgBH,KAAK,CAACU,QAAQ,CAAG,uBAAuB,CAAG,EAAE,SACpET,OAAO,CAAG,EAAE,CAAG,YAAY,CAC1B,CACH,KAAK,CAAED,KAAK,CAACW,KAAM,eAEnB,8BACE,OAAO,CAAE,kBAAM,CACbC,MAAM,CAACC,cAAc,CAACC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAChB,KAAK,CAACiB,IAAI,CAAG,CAAC,CAAE,CAAC,CAAC,CAAE,IAAI,CAAC,CACjE,CAAE,EACH,SAED,CAAS,CACRjB,KAAK,CAACkB,IAAI,GAAK,OAAO,cACrB,2BAAK,SAAS,CAAC,2BAA2B,eACxC,2BAAK,GAAG,CAAC,OAAO,CAAC,GAAG,CAAEC,KAAM,EAAG,CAC3B,cAEN,2BAAK,SAAS,CAAC,0BAA0B,eACvC,2BAAK,GAAG,CAAC,MAAM,CAAC,GAAG,CAAEC,IAAK,EAAG,CAEhC,cAQD,6BACE,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,WAAW,CACrB,IAAI,CAAC,KAAK,CACV,YAAY,CAAEpB,KAAK,CAACiB,IAAI,CAACI,OAAO,CAAC,CAAC,CAAE,CACpC,GAAG,CAAEZ,OAAQ,CACb,QAAQ,CAAE,mBAAM,CACdT,KAAK,CAACF,cAAc,CAClBE,KAAK,CAACsB,UAAU,CAACC,eAAe,EAAE,CAACC,QAAQ,CAC3Cf,OAAO,CAACJ,OAAO,CAACoB,KAAK,CACrBzB,KAAK,CAAC0B,QAAQ,CACd1B,KAAK,CAAC2B,EAAE,CACR3B,KAAK,CAAC4B,SAAS,CAChB,CACH,CAAE,EACK,cACT,2BAAK,SAAS,CAAC,mBAAmB,eAChC,8BACE,SAAS,CAAC,aAAa,CACvB,OAAO,CAAE,yBACP5B,MAAK,CAACJ,QAAQ,CACZI,KAAK,CAAC6B,KAAK,CACX7B,KAAK,CAACkB,IAAI,GAAK,OAAO,CAAGlB,KAAK,CAAC2B,EAAE,CAAG,IAAI,CAAE;AAC1C,CAAC3B,KAAK,CAAC8B,UAAU,CAACC,GAAG,CAAC/B,KAAK,CAAC2B,EAAE,CAAC,CAChC,EACF,eAED,2BAAK,GAAG,CAAC,aAAa,CAAC,GAAG,CAAEK,IAAK,EAAG,CAC7B,cACT,8BACE,SAAS,CAAC,aAAa,CACvB,OAAO,CAAE,kBAAM,CACb,GAAIpB,MAAM,CAACqB,OAAO,CAAC,SAAS,CAAC,CAC3BjC,KAAK,CAACH,UAAU,CACdG,KAAK,CAAC2B,EAAE,CACR3B,KAAK,CAACsB,UAAU,CAChBtB,KAAK,CAAC0B,QAAQ,CACd1B,KAAK,CAAC4B,SAAS,CAChB,CACL,CAAE,eAEF,2BAAK,GAAG,CAAC,eAAe,CAAC,GAAG,CAAEM,MAAO,EAAG,CACjC,CACL,CACF,CAEV,CAEA,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,KAAK,QAAM,CAClCd,UAAU,CAAEc,KAAK,CAACd,UAAU,CAC5BQ,UAAU,CAAEM,KAAK,CAACN,UAAU,CAC5BF,SAAS,CAAEQ,KAAK,CAACR,SACnB,CAAC,EAAC,CAEF,GAAMS,mBAAkB,CAAG,CACzBzC,QAAQ,CAARA,QAAQ,CACRC,UAAU,CAAVA,UAAU,CACVC,cAAc,CAAdA,cACF,CAAC,CAED,cAAeH,QAAO,CAACwC,eAAe,CAAEE,kBAAkB,CAAC,CAACtC,UAAU,CAAC"},"metadata":{},"sourceType":"module"}