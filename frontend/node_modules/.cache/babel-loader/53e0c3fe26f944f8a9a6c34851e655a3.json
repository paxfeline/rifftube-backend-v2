{"ast":null,"code":"import _defineProperty from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectWithoutProperties from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _toPropertyKey from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toPropertyKey\";import _objectSpread from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{SET_VIDEO_ID,EDIT_RIFF,SAVE_RIFF_SUCCESS,SAVE_RIFF,CREATE_TEMP_AUDIO_RIFF,CREATE_TEMP_TEXT_RIFF,RIFF_LOADED,SAVE_TEMP_AUDIO,CANCEL_EDIT,LOAD_RIFF}from'../actions/index.js';var initialState={saving:{},loading:{},temp:null,all:{},editIndex:null};var riffsAudioReducer=function riffsAudioReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case CREATE_TEMP_AUDIO_RIFF:case CREATE_TEMP_TEXT_RIFF:return _objectSpread(_objectSpread({},state),{},{editIndex:null});case SET_VIDEO_ID:return initialState;case EDIT_RIFF:return _objectSpread(_objectSpread({},state),{},{temp:state.all[action.id],// copy specified riff audio to temp\neditIndex:action.payload});case SAVE_RIFF_SUCCESS:{if(action.payload.type==='add'){var _state$saving=state.saving,_action$payload$tempI=action.payload.tempId,foo=_state$saving[_action$payload$tempI],saving=_objectWithoutProperties(_state$saving,[_action$payload$tempI].map(_toPropertyKey));// foo is discarded\nreturn _objectSpread(_objectSpread({},state),{},{saving:saving,all:_objectSpread(_objectSpread({},state.all),{},_defineProperty({},action.payload.id,state.temp)),temp:null});}else return state;}case SAVE_RIFF:{// adding a new riff:\nif(state.editIndex===null)return _objectSpread(_objectSpread({},state),{},{saving:_objectSpread(_objectSpread({},state.saving),{},_defineProperty({},action.riff.tempId,true)),editIndex:null});// EDIT_MODE (existing riff):\nelse return _objectSpread(_objectSpread({},state),{},{all:_objectSpread(_objectSpread({},state.all),{},_defineProperty({},action.riff.id,action.payload.payload)),editIndex:null,temp:null});}case LOAD_RIFF:{return _objectSpread(_objectSpread({},state),{},{loading:_objectSpread(_objectSpread({},state.loading),{},_defineProperty({},action.payload,true))});}case RIFF_LOADED:{var _state$loading=state.loading,_action$id=action.id,_foo=_state$loading[_action$id],loading=_objectWithoutProperties(_state$loading,[_action$id].map(_toPropertyKey));// foo is discarded\nvar audio=new Blob(new Array(action.payload),{type:'audio/mp3'});return _objectSpread(_objectSpread({},state),{},{loading:loading,all:_objectSpread(_objectSpread({},state.all),{},_defineProperty({},action.id,audio)),temp:state.editIndex===null?null:audio});}case SAVE_TEMP_AUDIO:return _objectSpread(_objectSpread({},state),{},{temp:action.payload});case CANCEL_EDIT:return _objectSpread(_objectSpread({},state),{},{temp:null,editIndex:null});default:return state;}};export default riffsAudioReducer;","map":{"version":3,"names":["SET_VIDEO_ID","EDIT_RIFF","SAVE_RIFF_SUCCESS","SAVE_RIFF","CREATE_TEMP_AUDIO_RIFF","CREATE_TEMP_TEXT_RIFF","RIFF_LOADED","SAVE_TEMP_AUDIO","CANCEL_EDIT","LOAD_RIFF","initialState","saving","loading","temp","all","editIndex","riffsAudioReducer","state","action","type","id","payload","tempId","foo","riff","audio","Blob","Array"],"sources":["/Users/davidnewberry/Documents/test_rails/frontend/src/reducers/riffsAudio-reducer.js"],"sourcesContent":["import {\n  SET_VIDEO_ID,\n  EDIT_RIFF,\n  SAVE_RIFF_SUCCESS,\n  SAVE_RIFF,\n  CREATE_TEMP_AUDIO_RIFF,\n  CREATE_TEMP_TEXT_RIFF,\n  RIFF_LOADED,\n  SAVE_TEMP_AUDIO,\n  CANCEL_EDIT,\n  LOAD_RIFF,\n} from '../actions/index.js';\n\nlet initialState = { saving: {}, loading: {}, temp: null, all: {}, editIndex: null };\n\nconst riffsAudioReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case CREATE_TEMP_AUDIO_RIFF:\n    case CREATE_TEMP_TEXT_RIFF:\n      return { ...state, editIndex: null };\n    case SET_VIDEO_ID:\n      return initialState;\n    case EDIT_RIFF:\n      return {\n        ...state,\n        temp: state.all[action.id], // copy specified riff audio to temp\n        editIndex: action.payload\n      };\n    case SAVE_RIFF_SUCCESS: {\n      if (action.payload.type === 'add') {\n        const { [action.payload.tempId]: foo, ...saving } = state.saving; // foo is discarded\n        return {\n          ...state,\n          saving,\n          all: {\n            ...state.all,\n            [action.payload.id]: state.temp,\n          },\n          temp: null,\n        };\n      } else return state;\n    }\n    case SAVE_RIFF: {\n      // adding a new riff:\n      if (state.editIndex === null)\n        return {\n          ...state,\n          saving: {\n            ...state.saving,\n            [action.riff.tempId]: true,\n          },\n          editIndex: null,\n        };\n      // EDIT_MODE (existing riff):\n      else\n        return {\n          ...state,\n          all: {\n            ...state.all,\n            [action.riff.id]: action.payload.payload,\n          },\n          editIndex: null,\n          temp: null,\n        };\n    }\n    case LOAD_RIFF: {\n      return {\n        ...state,\n        loading: {\n          ...state.loading,\n          [action.payload]: true,\n        },\n      };\n    }\n    case RIFF_LOADED: {\n      const { [action.id]: foo, ...loading } = state.loading; // foo is discarded\n      const audio = new Blob(new Array(action.payload), {\n            type: 'audio/mp3',\n          });\n      return {\n        ...state,\n        loading,\n        all: {\n          ...state.all,\n          [action.id]: audio\n        },\n        temp: state.editIndex === null ? null : audio,\n      };\n    }\n    case SAVE_TEMP_AUDIO:\n      return {\n        ...state,\n        temp: action.payload,\n      };\n    case CANCEL_EDIT:\n      return {\n        ...state,\n        temp: null,\n        editIndex: null,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default riffsAudioReducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}