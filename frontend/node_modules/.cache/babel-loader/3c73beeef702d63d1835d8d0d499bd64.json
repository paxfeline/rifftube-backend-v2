{"ast":null,"code":"import _createClass from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _classCallCheck from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _inherits from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/davidnewberry/Documents/test_rails/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{setPlayerMode,PLAY_MODE}from'../../actions/index.js';var AllowPlayback=/*#__PURE__*/function(_React$Component){_inherits(AllowPlayback,_React$Component);var _super=_createSuper(AllowPlayback);function AllowPlayback(props){var _this;_classCallCheck(this,AllowPlayback);_this=_super.call(this,props);_this.componentDidMount=function(){var test=new Audio();test.controls=false;test.src='/dingdong.wav';test.play().then(function(){_this.setupAudioPlayers();}).catch(function(){console.error('playback not allowed');});};_this.setupAudioPlayers=function(){_this.setState({allowed:true});window.audioContexts=[];window.audioPlayers=[];window.audioPlayerUse=[];window.audioPlayersCount=5;for(var i=0;i<5;i++){window.audioContexts[i]=new(window.AudioContext||window.webkitAudioContext)();window.audioPlayers[i]=new Audio();// should be identical behavior to: document.createElement('audio');\nwindow.audioPlayers[i].controls=false;window.audioPlayers[i].addEventListener('ended',function(){this.inUse=false;});var se=document.createElement('source');window.audioPlayers[i].appendChild(se);window.audioPlayers[i].srcEl=se;}};_this.render=function(){//if (!this.state) return null;\nreturn!_this.state.allowed?/*#__PURE__*/React.createElement(\"div\",{className:\"audio-capture\",onClick:function onClick(){_this.setupAudioPlayers();_this.props.setPlayerMode(PLAY_MODE);}}):null;};_this.state={allowed:false};return _this;}return _createClass(AllowPlayback);}(React.Component);var mapStateToProps=function mapStateToProps(state){return{};};var mapDispatchToProps={setPlayerMode:setPlayerMode};export default connect(mapStateToProps,mapDispatchToProps)(AllowPlayback);","map":{"version":3,"names":["React","connect","setPlayerMode","PLAY_MODE","AllowPlayback","props","componentDidMount","test","Audio","controls","src","play","then","setupAudioPlayers","catch","console","error","setState","allowed","window","audioContexts","audioPlayers","audioPlayerUse","audioPlayersCount","i","AudioContext","webkitAudioContext","addEventListener","inUse","se","document","createElement","appendChild","srcEl","render","state","Component","mapStateToProps","mapDispatchToProps"],"sources":["/Users/davidnewberry/Documents/test_rails/frontend/src/components/YouTubeVideo/AllowPlayback.js"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { setPlayerMode, PLAY_MODE } from '../../actions/index.js';\n\nclass AllowPlayback extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { allowed: false };\n  }\n\n  componentDidMount = () => {\n    var test = new Audio();\n    test.controls = false;\n    test.src = '/dingdong.wav';\n    test\n      .play()\n      .then(() => {\n        this.setupAudioPlayers();\n      })\n      .catch(() => {\n        console.error('playback not allowed');\n      });\n  };\n\n  setupAudioPlayers = () => {\n    this.setState({ allowed: true });\n    window.audioContexts = [];\n    window.audioPlayers = [];\n    window.audioPlayerUse = [];\n    window.audioPlayersCount = 5;\n    for (let i = 0; i < 5; i++) {\n      window.audioContexts[i] = new (window.AudioContext ||\n        window.webkitAudioContext)();\n\n      window.audioPlayers[i] = new Audio(); // should be identical behavior to: document.createElement('audio');\n      window.audioPlayers[i].controls = false;\n      window.audioPlayers[i].addEventListener('ended', function () {\n        this.inUse = false;\n      });\n\n      let se = document.createElement('source');\n      window.audioPlayers[i].appendChild(se);\n      window.audioPlayers[i].srcEl = se;\n    }\n  };\n\n  render = () => {\n    //if (!this.state) return null;\n\n    return !this.state.allowed ? (\n      <div\n        className=\"audio-capture\"\n        onClick={() => {\n          this.setupAudioPlayers();\n          this.props.setPlayerMode(PLAY_MODE);\n        }}\n      />\n    ) : null;\n  };\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {\n  setPlayerMode,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AllowPlayback);\n"],"mappings":"opBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,aAAa,CAAEC,SAAS,KAAQ,wBAAwB,CAAC,GAE5DC,cAAa,0HACjB,uBAAYC,KAAK,CAAE,+CACjB,uBAAMA,KAAK,EAAE,MAIfC,iBAAiB,CAAG,UAAM,CACxB,GAAIC,KAAI,CAAG,GAAIC,MAAK,EAAE,CACtBD,IAAI,CAACE,QAAQ,CAAG,KAAK,CACrBF,IAAI,CAACG,GAAG,CAAG,eAAe,CAC1BH,IAAI,CACDI,IAAI,EAAE,CACNC,IAAI,CAAC,UAAM,CACV,MAAKC,iBAAiB,EAAE,CAC1B,CAAC,CAAC,CACDC,KAAK,CAAC,UAAM,CACXC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAC,CACvC,CAAC,CAAC,CACN,CAAC,OAEDH,iBAAiB,CAAG,UAAM,CACxB,MAAKI,QAAQ,CAAC,CAAEC,OAAO,CAAE,IAAK,CAAC,CAAC,CAChCC,MAAM,CAACC,aAAa,CAAG,EAAE,CACzBD,MAAM,CAACE,YAAY,CAAG,EAAE,CACxBF,MAAM,CAACG,cAAc,CAAG,EAAE,CAC1BH,MAAM,CAACI,iBAAiB,CAAG,CAAC,CAC5B,IAAK,GAAIC,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAG,CAAC,CAAEA,CAAC,EAAE,CAAE,CAC1BL,MAAM,CAACC,aAAa,CAACI,CAAC,CAAC,CAAG,IAAKL,MAAM,CAACM,YAAY,EAChDN,MAAM,CAACO,kBAAkB,GAAG,CAE9BP,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAAG,GAAIhB,MAAK,EAAE,CAAE;AACtCW,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACf,QAAQ,CAAG,KAAK,CACvCU,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACG,gBAAgB,CAAC,OAAO,CAAE,UAAY,CAC3D,IAAI,CAACC,KAAK,CAAG,KAAK,CACpB,CAAC,CAAC,CAEF,GAAIC,GAAE,CAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CACzCZ,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACQ,WAAW,CAACH,EAAE,CAAC,CACtCV,MAAM,CAACE,YAAY,CAACG,CAAC,CAAC,CAACS,KAAK,CAAGJ,EAAE,CACnC,CACF,CAAC,OAEDK,MAAM,CAAG,UAAM,CACb;AAEA,MAAO,CAAC,MAAKC,KAAK,CAACjB,OAAO,cACxB,2BACE,SAAS,CAAC,eAAe,CACzB,OAAO,CAAE,kBAAM,CACb,MAAKL,iBAAiB,EAAE,CACxB,MAAKR,KAAK,CAACH,aAAa,CAACC,SAAS,CAAC,CACrC,CAAE,EACF,CACA,IAAI,CACV,CAAC,CAnDC,MAAKgC,KAAK,CAAG,CAAEjB,OAAO,CAAE,KAAM,CAAC,CAAC,aAClC,CAAC,qCAJyBlB,KAAK,CAACoC,SAAS,EAyD3C,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAIF,KAAK,QAAM,CAAC,CAAC,EAAC,CAEvC,GAAMG,mBAAkB,CAAG,CACzBpC,aAAa,CAAbA,aACF,CAAC,CAED,cAAeD,QAAO,CAACoC,eAAe,CAAEC,kBAAkB,CAAC,CAAClC,aAAa,CAAC"},"metadata":{},"sourceType":"module"}